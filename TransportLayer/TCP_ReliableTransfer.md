# TCP:신뢰적인 데이터 전송

TCP는 IP의 비신뢰적인 최선형 서비스에서 신뢰적인 데이터 전송 서비스를 제공한다.  
TCP의 신뢰적인 데이터 전송 서비스는 프로세스가 자신의 수신 버퍼로부터 읽은 데이터 스트림이 손상되지 않았으며 손실이나 중복이 없다는 것과 순서가 유지된다는 것을 보장한다.  

다시말해, 바이트 스트림은 송신자가 전송한 것과 같은 바이트 스트림이다.

세그먼트와 개별적인 타이머가 한 쌍이 되어 동작한다고 가정하는 것이 이론상으로는 훌륭할지 몰라도, 타이머 관리는 상당한 오버헤드를 요구한다.  
권장되는 TCP 타이머 관리 절차에서는 오직 단일 재전송 타이머를 사용한다.  

TCP 송신자의 데이터 전송/재전송에 관련된 세 가지 주요 이벤트가 있다.  
그것은 상위 애플리케이션으로부터 수신된 데이터, 타이머 타임아웃, ACK수신이다.  

첫 번째 주요 이벤트 발생으로 TCP는 애플리케이션으로부터 데이터를 받고, 세그먼트로 이 데이터를 캡슐화하고 IP에게 세그먼트를 넘긴다.  
각 세그먼트는 첫 번째 데이터 바이트의 바이트 열 번호인 순서번호를 포함한다.  
또한 타이머가 이미 다른 세그먼트에 대해 실행 중이 아니면 TCP는 이 세그먼트를 IP로 넘길 때 타이머를 시작한다.  

두 번째 주요 이벤트는 타임아웃이다. TCP는 타임아웃 이벤트에 대해 타임아웃을 일으킨 세그먼트를 재전송하여 응답한다. 그리고 TCP의 타이머를 다시 시작한다.  

세 번째 주요 이벤트는 수신자로부터의 수신 확인응답 세그먼트의 수신이다.  
이 이벤트가 일어나면, TCP는 변수 sendbase와 ACK값 y를 비교한다.  
TCP 상태 변수 sendbase는 수신확인응답되지 않은 가장 오래된 바이트의 순서번호이다.  
TCP는 누적 확인응답을 사용하고, y는 y바이트 이전의 모든 바이트의 수신을 확인한다.  
만일 y>sendbase 이면, ACK는 이전에 확인응답 안된 하나 이상의 세그먼트들을 확인해준다.  

